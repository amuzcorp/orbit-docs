export const metadata = {
  title: '사이트 예제',
  description: 'CMS-Orbit의 사이트 구현 예제에 대해 알아봅니다.',
}

export const sections = [
  { title: '기본 사이트', id: 'basic-site' },
  { title: '이커머스 사이트', id: 'ecommerce-site' },
  { title: '블로그 사이트', id: 'blog-site' },
]

# 사이트 예제

CMS-Orbit을 사용하여 다양한 유형의 사이트를 구현하는 예제를 알아봅니다. {{ className: 'lead' }}

## 기본 사이트

### 사이트 생성

```php {{ title: '기본 사이트 생성' }}
use Orbit\Tenancy\Tenant;

// 사이트 생성
$tenant = Tenant::create([
    'name' => '기본 사이트',
    'domain' => 'example.com',
    'settings' => [
        'theme' => 'default',
        'locale' => 'ko',
        'timezone' => 'Asia/Seoul',
    ],
]);

// 데이터베이스 생성
$tenant->run(function () {
    Artisan::call('migrate');
    Artisan::call('db:seed');
});

// 기본 페이지 생성
$tenant->run(function () {
    Page::create([
        'title' => '홈',
        'slug' => 'home',
        'content' => '환영합니다.',
        'status' => 'published',
    ]);
});
```

### 테마 설정

```php {{ title: '테마 설정' }}
use Orbit\Tenancy\Tenant;

$tenant = Tenant::find('site-a');

// 테마 설치
$theme = Theme::install('default', [
    'name' => '기본 테마',
    'version' => '1.0.0',
]);

// 테마 설정
$tenant->settings()->set('theme', [
    'active' => $theme->id,
    'options' => [
        'primary_color' => '#007bff',
        'secondary_color' => '#6c757d',
        'font_family' => 'Arial',
    ],
]);
```

### 사용자 관리

```php {{ title: '사용자 관리' }}
use Orbit\Tenancy\Tenant;

$tenant = Tenant::find('site-a');

// 관리자 생성
$admin = $tenant->run(function () {
    return User::create([
        'name' => '관리자',
        'email' => 'admin@example.com',
        'password' => Hash::make('password'),
    ]);
});

// 역할 및 권한 설정
$tenant->run(function () use ($admin) {
    $role = Role::create(['name' => 'admin']);
    $permission = Permission::create(['name' => 'manage-site']);
    $role->givePermissionTo($permission);
    $admin->assignRole($role);
});
```

## 이커머스 사이트

### 상품 관리

```php {{ title: '상품 관리' }}
use Orbit\Tenancy\Tenant;

$tenant = Tenant::find('ecommerce');

// 상품 생성
$tenant->run(function () {
    $product = Product::create([
        'name' => '샘플 상품',
        'description' => '상품 설명',
        'price' => 10000,
        'stock' => 100,
        'status' => 'active',
    ]);

    // 상품 이미지
    $product->images()->create([
        'path' => 'products/sample.jpg',
        'is_main' => true,
    ]);

    // 상품 카테고리
    $category = Category::create([
        'name' => '샘플 카테고리',
        'slug' => 'sample-category',
    ]);
    $product->categories()->attach($category);
});
```

### 주문 처리

```php {{ title: '주문 처리' }}
use Orbit\Tenancy\Tenant;

$tenant = Tenant::find('ecommerce');

// 주문 생성
$tenant->run(function () {
    $order = Order::create([
        'user_id' => Auth::id(),
        'total' => 10000,
        'status' => 'pending',
    ]);

    // 주문 상품
    $order->items()->create([
        'product_id' => 1,
        'quantity' => 1,
        'price' => 10000,
    ]);

    // 결제 처리
    $payment = $order->payments()->create([
        'amount' => 10000,
        'method' => 'credit_card',
        'status' => 'completed',
    ]);
});
```

### 재고 관리

```php {{ title: '재고 관리' }}
use Orbit\Tenancy\Tenant;

$tenant = Tenant::find('ecommerce');

// 재고 업데이트
$tenant->run(function () {
    $product = Product::find(1);
    
    // 재고 감소
    $product->decrement('stock', 1);
    
    // 재고 알림
    if ($product->stock < 10) {
        Notification::send($product->vendor, new LowStockAlert($product));
    }
});
```

## 블로그 사이트

### 게시물 관리

```php {{ title: '게시물 관리' }}
use Orbit\Tenancy\Tenant;

$tenant = Tenant::find('blog');

// 게시물 생성
$tenant->run(function () {
    $post = Post::create([
        'title' => '샘플 게시물',
        'content' => '게시물 내용',
        'author_id' => Auth::id(),
        'status' => 'published',
        'published_at' => now(),
    ]);

    // 태그 추가
    $tags = ['PHP', 'Laravel', 'CMS'];
    foreach ($tags as $tag) {
        $tag = Tag::firstOrCreate(['name' => $tag]);
        $post->tags()->attach($tag);
    }

    // 카테고리 추가
    $category = Category::create([
        'name' => '개발',
        'slug' => 'development',
    ]);
    $post->categories()->attach($category);
});
```

### 댓글 시스템

```php {{ title: '댓글 시스템' }}
use Orbit\Tenancy\Tenant;

$tenant = Tenant::find('blog');

// 댓글 생성
$tenant->run(function () {
    $comment = Comment::create([
        'post_id' => 1,
        'user_id' => Auth::id(),
        'content' => '댓글 내용',
        'status' => 'approved',
    ]);

    // 댓글 알림
    $post = Post::find(1);
    Notification::send($post->author, new NewCommentAlert($comment));
});
```

### SEO 최적화

```php {{ title: 'SEO 최적화' }}
use Orbit\Tenancy\Tenant;

$tenant = Tenant::find('blog');

// SEO 설정
$tenant->settings()->set('seo', [
    'title' => '블로그 제목',
    'description' => '블로그 설명',
    'keywords' => 'PHP, Laravel, CMS',
    'robots' => 'index, follow',
]);

// 게시물 SEO
$tenant->run(function () {
    $post = Post::find(1);
    $post->seo()->create([
        'title' => $post->title,
        'description' => Str::limit($post->content, 160),
        'keywords' => $post->tags->pluck('name')->implode(', '),
    ]);
});
```

### 예제 명령어

```bash {{ title: '예제 명령어' }}
# 기본 사이트 생성
php artisan tenancy:create basic example.com

# 이커머스 사이트 생성
php artisan tenancy:create ecommerce shop.example.com

# 블로그 사이트 생성
php artisan tenancy:create blog blog.example.com
```

<div className="not-prose">
  <Button href="/multi-site/faq" variant="text" arrow="right">
    <>자주 묻는 질문 알아보기</>
  </Button>
</div> 