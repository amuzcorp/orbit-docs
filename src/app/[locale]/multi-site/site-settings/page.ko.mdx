# 사이트 설정

이 가이드는 사이트 설정 방법에 대해 설명합니다.

## 설정 영역

- **일반 설정**: 기본 사이트 정보
- **도메인 설정**: 도메인 및 SSL 설정
- **데이터베이스 설정**: 데이터베이스 연결 설정
- **캐시 설정**: 캐시 및 성능 설정
- **메일 설정**: 이메일 서비스 설정

## 설정 방법

### 1. 일반 설정

```php {{ title: '일반 설정' }}
use Orbit\Tenancy\Tenant;

$tenant = Tenant::find('site-a');

// 기본 설정
$tenant->settings()->set([
    'app_name' => 'Site A',
    'app_url' => 'https://site-a.example.com',
    'timezone' => 'Asia/Seoul',
    'locale' => 'ko',
    'debug' => false,
]);
```

### 2. 도메인 설정

```php {{ title: '도메인 설정' }}
// config/tenancy.php
return [
    'domains' => [
        'enabled' => true,
        'default' => 'example.com',
        'ssl' => [
            'enabled' => true,
            'force' => true,
            'hsts' => [
                'enabled' => true,
                'max_age' => 31536000,
                'include_subdomains' => true,
            ],
        ],
    ],
];
```

### 3. 데이터베이스 설정

```php {{ title: '데이터베이스 설정' }}
// config/tenancy.php
return [
    'database' => [
        'tenant' => [
            'driver' => 'mysql',
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '3306'),
            'database' => null, // 동적으로 설정됨
            'username' => env('DB_USERNAME', 'forge'),
            'password' => env('DB_PASSWORD', ''),
            'charset' => 'utf8mb4',
            'collation' => 'utf8mb4_unicode_ci',
            'prefix' => '',
        ],
    ],
];
```

### 4. 캐시 설정

```php {{ title: '캐시 설정' }}
// config/tenancy.php
return [
    'cache' => [
        'driver' => 'redis',
        'connection' => 'tenant',
        'prefix' => 'tenant_',
        'ttl' => 3600,
        'tags' => [
            'enabled' => true,
            'prefix' => 'tenant_',
        ],
    ],
];
```

### 5. 메일 설정

```php {{ title: '메일 설정' }}
// config/tenancy.php
return [
    'mail' => [
        'driver' => 'smtp',
        'host' => env('MAIL_HOST', 'smtp.mailgun.org'),
        'port' => env('MAIL_PORT', 587),
        'username' => env('MAIL_USERNAME'),
        'password' => env('MAIL_PASSWORD'),
        'encryption' => env('MAIL_ENCRYPTION', 'tls'),
        'from' => [
            'address' => 'noreply@site-a.example.com',
            'name' => 'Site A',
        ],
    ],
];
```

## 설정 명령어

```bash {{ title: '설정 명령어' }}
# 설정 확인
php artisan tenancy:settings site-a

# 설정 업데이트
php artisan tenancy:settings site-a --key=app_name --value="New Site Name"

# 설정 초기화
php artisan tenancy:settings-reset site-a
```

## 모범 사례

1. 정기적인 설정 백업
2. 보안 관련 설정 주기적 검토
3. 성능 최적화를 위한 캐시 설정
4. SSL 인증서 자동 갱신 설정
5. 설정 변경 시 테스트 환경에서 먼저 검증

<div className="not-prose">
  <Button href="/multi-site/security" variant="text" arrow="right">
    <>보안 설정하기</>
  </Button>
</div> 