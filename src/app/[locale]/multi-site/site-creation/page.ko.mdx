# 사이트 생성

이 가이드는 새로운 사이트를 생성하고 설정하는 방법을 설명합니다.

## 사전 요구사항

- 관리자 권한
- 유효한 도메인
- 데이터베이스 접근 권한
- SSL 인증서 (선택사항)

## 사이트 생성 단계

### 1. 기본 정보 설정

```php {{ title: '기본 정보 설정' }}
use Orbit\Tenancy\Tenant;

// 새 사이트 생성
$tenant = Tenant::create([
    'id' => 'site-a',
    'name' => 'Site A',
    'domain' => 'site-a.example.com',
    'database' => [
        'connection' => 'tenant',
        'name' => 'tenant_site_a',
    ],
]);

// 사이트 초기화
$tenant->initialize();
```

### 2. 데이터베이스 설정

```php {{ title: '데이터베이스 설정' }}
// config/tenancy.php
return [
    'database' => [
        'tenant' => [
            'driver' => 'mysql',
            'host' => env('DB_HOST', '127.0.0.1'),
            'port' => env('DB_PORT', '3306'),
            'database' => null, // 동적으로 설정됨
            'username' => env('DB_USERNAME', 'forge'),
            'password' => env('DB_PASSWORD', ''),
            'charset' => 'utf8mb4',
            'collation' => 'utf8mb4_unicode_ci',
            'prefix' => '',
        ],
    ],
];
```

### 3. 사이트 설정

```php {{ title: '사이트 설정' }}
// 사이트 설정
$tenant->settings()->set([
    'app_name' => 'Site A',
    'timezone' => 'Asia/Seoul',
    'locale' => 'ko',
    'mail' => [
        'from_address' => 'noreply@site-a.example.com',
        'from_name' => 'Site A',
    ],
]);
```

### 4. 사용자 및 권한 설정

```php {{ title: '사용자 및 권한 설정' }}
// 관리자 사용자 생성
$admin = $tenant->users()->create([
    'name' => 'Admin',
    'email' => 'admin@site-a.example.com',
    'password' => Hash::make('password'),
]);

// 관리자 역할 할당
$tenant->permissions()->assignRole($admin, 'admin');
```

## 사이트 생성 명령어

```bash {{ title: '사이트 생성 명령어' }}
# 새 사이트 생성
php artisan tenancy:create site-a

# 사이트 초기화
php artisan tenancy:init site-a

# 사이트 설정
php artisan tenancy:settings site-a
```

## 모범 사례

1. 명확한 사이트 ID와 도메인 사용
2. 보안을 위한 강력한 비밀번호 설정
3. 적절한 데이터베이스 접두사 사용
4. SSL 인증서 설정
5. 백업 설정

<div className="not-prose">
  <Button href="/multi-site/site-management" variant="text" arrow="right">
    <>사이트 관리하기</>
  </Button>
</div> 